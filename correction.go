package calendar

import (
	"github.com/RoaringBitmap/roaring"
)

var shuoCorrect = []struct{ jdN, delta float64 }{
	{2269455, -1},
	{2271846, 1},
	{2273973, -1},
	{2275065, 1},
	{2276867, -1},
	{2278610, -1},
	{2278964, -1},
	{2281504, -1},
	{2281947, -1},
	{2282005, 1},
	{2285136, -1},
	{2285726, 1},
	{2285933, -1},
	{2295088, -1},
	{2295442, -1},
	{2298808, 1},
	{2299074, -1},
	{2301181, -1},
	{2301446, 1},
	{2302421, -1},
	{2305108, 1},
	{2305493, -1},
	{2309892, 1},
	{2311428, -1},
	{2313673, -1},
	{2315562, -1},
	{2315680, 1},
	{2316507, 1},
	{2318102, -1},
	{2321202, 1},
	{2323477, -1},
	{2324037, 1},
	{2324480, 1},
	{2325071, -1},
	{2325189, 1},
	{2328143, -1},
	{2332423, 1},
	{2336529, -1},
	{2337297, -1},
	{2339955, -1},
	{2343734, 1},
	{2344946, -1},
	{2349464, -1},
	{2363609, -1},
	{2365233, -1},
	{2370549, -1},
	{2371021, -1},
	{2374092, -1},
	{2374683, -1},
	{2377193, -1},
	{2380175, -1},
	{2386346, 1},
	{2389921, -1},
	{2393848, -1},
	{2401526, -1},
	{2408022, 1},
	{2413604, -1},
	{2420455, -1},
	{2420898, -1},
	{2422640, -1},
}

var shuoMinus = "OjAAAAgAAAAdADUAHgAKAB8AAwAgAAAAIQAbACIAGQAjABEAJAAOAEgAAAC0AAAAygAAANIAAADUAAAADAEAAEABAABkAQAA5bi+utHC2sMzxFrFx8eBz6jTz9pj26jc49we3WPexd/j30XhgOEA4zvjduO75PbkMeV25rHm9ucx6Gzosens6RPrMeuT7M7sTu6J7sTuCfBE8H/wxPH/8UTzf/P/9GH2f/a69uH3HPiS+xL9Gw0GEV8RhhKtHFQf0VP4VCldi15ieO57UH1ufVL5iMYTTuBmLmxzcIZ+XYznlCKVoZxwnXCgeaTvp9GtgrFkt2S6MsG7zADOztrO4JznHOmc6hv1QvZq92kA3wbeDF0g+iT6LSEvPE2BVzFkpnCmfMOCJYT9iIeRrZhomhmhv7INvtzEPsbl0Vred+E6BZwGzBTfHP0c1SHVLQRFyU0qVRZfFXRPhhGnEapztPLHmNnZEDEX9SvNLcw5GzzpRY9RoXf4hvakJNTn7qLwcPc="
var shuoPlus = "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"
var qiMinus = "OjAAAAMAAAAjAH8AJAASACUAAQAgAAAAIAEAAEYBAACob+hw93AGcV11nXa7dul203i0eQJ7EnsIfHB8nnxpf3yABYH4gVOCgoIehTGGuoathwiIOIlqitOK8ormi2KN3o7tjh+Qp5AXk1OTWJSTlKKUsZQImUiaV5pmmn6dvZ7rnv2fDKAboEmgFKNypLKl0KX+pcmoJ6plqoWrs6viq36uka8asA2xaLEztFK0RrXCtk24f7nouQe6+7p3vLO8Ar40v7y/sMAswmjCqMO3w8bDHcgiyV3JbMl7ydLNEs8hzzDPXs8p0ofTxdPH1OXUE9VC1d7Xetma2sjak92y3SLgfeBI42fjW+TX5WLnHOkQ6ozryOvF7/7z9vbn+zb+HwCcAo8IkQldEgsmSy23LbExpjggVd1XYFzGYLtnpnBnkeeZQ/MtAUwC"
var qiPlus = "OjAAAAIAAAAjAD8AJAAiABgAAACYAAAAJHDZdfh1rXuhfXh+pn7Gf2KB/oMthFuEeYS5hReH4okQii6KbovUjyORiZXYlhSXhJk+m8mcOZ8NpdinJqnCqo2tu613sHqyQrNws46zzrQluUO5g7r4vjjA5MKexJnI3sttzjjRhtIi1O3W19mi3NDcheKj4uPjOuhJ6FjomOkwBkMN4iY5MUU1HVlaZBlul3VXf2OK543fkG+TzZQYlZ2krKQbp1KqU6uCq7u7/LyEwuLDLcSOxrLTwdPM1+vYZ9kR7ELt"
var raShuoMinus = roaring.New()
var raShuoPlus = roaring.New()
var raQiMinus = roaring.New()
var raQiPlus = roaring.New()

func init() {
	raShuoMinus.FromBase64(shuoMinus)
	raShuoPlus.FromBase64(shuoPlus)
	raQiMinus.FromBase64(qiMinus)
	raQiPlus.FromBase64(qiPlus)
}

func shuoC(s JDPlus) JDPlus {
	if s.Avg {
		return s
	}
	if raShuoMinus.Contains(uint32(jd2jdN(beijingTime(s)))) {
		s.JD--
	}
	if raShuoPlus.Contains(uint32(jd2jdN(beijingTime(s)))) {
		s.JD++
	}
	return s
}

func qiC(q JDPlus) JDPlus {
	if q.Avg {
		return q
	}
	if raQiMinus.Contains(uint32(jd2jdN(beijingTime(q)))) {
		q.JD--
	}
	if raQiPlus.Contains(uint32(jd2jdN(beijingTime(q)))) {
		q.JD++
	}
	return q
}
