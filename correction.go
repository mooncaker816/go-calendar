package calendar

import (
	"github.com/RoaringBitmap/roaring"
)

var shuoCorrect = []struct{ jdN, delta float64 }{
	{2269455, -1},
	{2271846, 1},
	{2273973, -1},
	{2275065, 1},
	{2276867, -1},
	{2278610, -1},
	{2278964, -1},
	{2281504, -1},
	{2281947, -1},
	{2282005, 1},
	{2285136, -1},
	{2285726, 1},
	{2285933, -1},
	{2295088, -1},
	{2295442, -1},
	{2298808, 1},
	{2299074, -1},
	{2301181, -1},
	{2301446, 1},
	{2302421, -1},
	{2305108, 1},
	{2305493, -1},
	{2309892, 1},
	{2311428, -1},
	{2313673, -1},
	{2315562, -1},
	{2315680, 1},
	{2316507, 1},
	{2318102, -1},
	{2321202, 1},
	{2323477, -1},
	{2324037, 1},
	{2324480, 1},
	{2325071, -1},
	{2325189, 1},
	{2328143, -1},
	{2332423, 1},
	{2336529, -1},
	{2337297, -1},
	{2339955, -1},
	{2343734, 1},
	{2344946, -1},
	{2349464, -1},
	{2363609, -1},
	{2365233, -1},
	{2370549, -1},
	{2371021, -1},
	{2374092, -1},
	{2374683, -1},
	{2377193, -1},
	{2380175, -1},
	{2386346, 1},
	{2389921, -1},
	{2393848, -1},
	{2401526, -1},
	{2408022, 1},
	{2413604, -1},
	{2420455, -1},
	{2420898, -1},
	{2422640, -1},
}

var shuoMinus = "OjAAAAgAAAAAAEAAAQACAAIAAAADABAABAAfAAUAFQAGAAwABwADAEgAAADKAAAA0AAAANIAAAD0AAAANAEAAGABAAB6AQAAAADZAewJ9QpOC3UM4g6cFsMa6iF+IsMj/iM5JH4l4Cb+JmAomygbKlYqkSrWKxEsTCyRLcwtES9ML4cvzDAHMS4yTDKuM+kzaTWkNd81JDdfN5o33zgaOV86mjoaPHw9mj3VPfw+Nz+tQi1ENlQhWHpYoVnIY29m7JoTnESkpqV9vwnDa8SJxG1Aow0ulfutSbOOt6HFeNMC3D3cvOOL5IvnlOsK7+z0nfh//n8BTQjWExsV6SHpJ7cuNzC3MTY8XT2FPoRH+k35U3hnFWwVdTx2V5ScnkyrwbfBw97JQMsY0KLYyN+D4TTo2vkoBfcLWQ0AGXUlkihVTLdN51v6Yxhk8GjwdB+M5JRFnDGmMLtqzSzuLPGO+w0PsyD0V0xeEHPodOeANoMEjaqYvL4TzhHsPxsCNr03iz4="
var shuoPlus = "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"
var qiMinus = "OjAAAAIAAAAAAI4AAQAFABgAAAA2AQAAAABAAU8BXgG1BfUGEwdBBysJDApaC2oLYAzIDPYMwQ/UEF0RUBKrEtoSdhWJFhIXBRhgGJAZwhorG0obPhy6HTYfRR93IP8gbyOrI7Ak6yT6JAklYCmgKq8qvirWLRUvQy9VMGQwczChMGwzyjQKNig2VjYhOX86vTrdOws8OjzWPuk/ckBlQcBBi0SqRJ5FGkelSNdJQEpfSlNLz0wLTVpOjE8UUAhRhFLAUgBUD1QeVHVYelm1WcRZ01kqXmpfeV+IX7ZfgWLfYx1kH2U9ZWtlmmU2aNJp8moga+ttCm56cNVwoHO/c7N0L3a6d3R5aHrkeyB8HYBWhE6HP4yOjneQ9JLnmOmZtaJjtqO9D74Jwv7IeOU16LjsHvET+P4AvyE/KpuDhZGkkg=="
var qiPlus = "OjAAAAIAAAAAAEcAAQAaABgAAACoAAAAAAC1BdQFiQt9DVQOgg6iDz4R2hMJFDcUVRSVFfMWvhnsGQoaShuwH/8gZSW0JvAmYCkaK6UsFS/pNLQ3AjmeOmk9lz1TQFZCHkNMQ2pDqkQBSR9JX0rUThRQwFJ6VHVYultJXhRhYmL+Y8lms2l+bKxsYXJ/cr9zFngleDR4dHkMlh+dvrYVwSHF+eg29PX9cwUzDz8awx27IEsjqST0JHk0iDT3Ni46LzteO5dL2ExgUr5TCVRqVo5jnWOoZ8doQ2ntex59"

var raShuoMinus = roaring.New()
var raShuoPlus = roaring.New()
var raQiMinus = roaring.New()
var raQiPlus = roaring.New()

const (
	shuoMinusBase uint32 = 1947877
	shuoPlusBase  uint32 = 1949825
	qiMinusBase   uint32 = 2322344
	qiPlusBase    uint32 = 2322468
)

func init() {
	raShuoMinus.FromBase64(shuoMinus)
	raShuoPlus.FromBase64(shuoPlus)
	raQiMinus.FromBase64(qiMinus)
	raQiPlus.FromBase64(qiPlus)
}

func shuoC(s JDPlus) JDPlus {
	if s.Avg {
		return s
	}
	if raShuoMinus.Contains(uint32(jd2jdN(beijingTime(s))) - shuoMinusBase) {
		s.JD--
	}
	if raShuoPlus.Contains(uint32(jd2jdN(beijingTime(s))) - shuoPlusBase) {
		s.JD++
	}
	return s
}

func qiC(q JDPlus) JDPlus {
	if q.Avg {
		return q
	}
	if raQiMinus.Contains(uint32(jd2jdN(beijingTime(q))) - qiMinusBase) {
		q.JD--
	}
	if raQiPlus.Contains(uint32(jd2jdN(beijingTime(q))) - qiPlusBase) {
		q.JD++
	}
	return q
}
